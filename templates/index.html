<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G-Tracker | Form Response Analyzer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="background-globes">
        <div class="globe globe-1"></div>
        <div class="globe globe-2"></div>
        <div class="globe globe-3"></div>
    </div>

    <div class="container">
        <header class="hero">
            <h1 class="logo">G-Tracker <span class="dot">.</span></h1>
            <p class="subtitle">Separate the active from the inactive. Instantly.</p>
        </header>

        <!-- View 1: Login / Sign Up -->
        <section id="view-login" class="view-section active">
            <div class="glass-panel auth-panel">
                <div class="auth-tabs">
                    <button id="tabLogin" class="tab-btn active">Login</button>
                    <button id="tabSignup" class="tab-btn">Sign Up</button>
                </div>

                <div id="loginForm" class="auth-form-container">
                    <h2>Welcome Back</h2>
                    <p>Access your response tracker</p>
                    <div class="input-group">
                        <i class="fa-solid fa-user input-icon"></i>
                        <input type="text" id="usernameInput" placeholder="Username" autocomplete="off">
                    </div>
                    <div class="input-group">
                        <i class="fa-solid fa-lock input-icon"></i>
                        <input type="password" id="passwordInput" placeholder="Password">
                    </div>
                    <button id="btnLogin" class="primary-btn">
                        <span>Sign In</span>
                        <i class="fa-solid fa-right-to-bracket"></i>
                    </button>
                </div>

                <div id="signupForm" class="auth-form-container hidden">
                    <h2>Join G-Tracker</h2>
                    <p>Create a new account</p>
                    <div class="input-group">
                        <i class="fa-solid fa-user input-icon"></i>
                        <input type="text" id="newUsername" placeholder="Full Name" autocomplete="off">
                    </div>
                    <div class="input-group">
                        <i class="fa-solid fa-envelope input-icon"></i>
                        <input type="email" id="newEmail" placeholder="Email Address">
                    </div>
                    <div class="input-group">
                        <i class="fa-solid fa-lock input-icon"></i>
                        <input type="password" id="newPassword" placeholder="Create Password">
                    </div>
                    <button id="btnSignup" class="primary-btn">
                        <span>Create Account</span>
                        <i class="fa-solid fa-user-plus"></i>
                    </button>
                </div>
            </div>
        </section>

        <!-- View 2: About & How it Works -->
        <section id="view-about" class="view-section hidden">
            <div class="glass-panel about-panel">
                <h2>About G-Tracker <i class="fa-solid fa-wand-magic-sparkles"></i></h2>
                <div class="about-content">
                    <p>G-Tracker is your intelligent companion for managing Google Form submissions. We help you bridge
                        the gap between "sent" and "received" with ultra-fast analysis.</p>

                    <h3 style="margin-top: 2rem; color: var(--accent-cyan);">How it Works</h3>
                    <div class="about-grid">
                        <div class="process-step">
                            <i class="fa-brands fa-google-drive"></i>
                            <h4>Step 1: Link</h4>
                            <p>Paste the Google Sheets URL where responses are stored.</p>
                        </div>
                        <div class="process-step">
                            <i class="fa-solid fa-file-csv"></i>
                            <h4>Step 2: Upload</h4>
                            <p>Or simply drag and drop your Excel/CSV export directly.</p>
                        </div>
                        <div class="process-step">
                            <i class="fa-solid fa-magnifying-glass-chart"></i>
                            <h4>Step 3: Analyze</h4>
                            <p>We'll detect missing names and incomplete submissions instantly.</p>
                        </div>
                    </div>
                </div>
                <button id="btnFromAbout" class="primary-btn" style="margin-top: 2rem;">
                    <span>Go to Dashboard</span>
                    <i class="fa-solid fa-rocket"></i>
                </button>
            </div>
        </section>

        <!-- View 3: Dashboard (The App) -->
        <section id="view-app" class="view-section hidden">
            <div class="welcome-banner">
                <h3>System Ready, <span id="displayUsername">User</span> <i class="fa-solid fa-bolt"></i></h3>
                <button id="btnLogout" class="logout-btn" title="Logout">
                    <i class="fa-solid fa-right-from-bracket"></i>
                    <span>Logout</span>
                </button>
            </div>

            <main class="glass-panel main-input">
                <div class="mode-toggle">
                    <button class="toggle-btn active" id="btnLinkMode">
                        <i class="fa-brands fa-google-drive"></i>
                        <span>Cloud Link</span>
                    </button>
                    <button class="toggle-btn" id="btnFileMode">
                        <i class="fa-solid fa-cloud-arrow-up"></i>
                        <span>Local File</span>
                    </button>
                </div>

                <div id="modeLink" class="input-mode">
                    <div class="input-group">
                        <i class="fa-solid fa-link input-icon"></i>
                        <input type="text" id="sheetUrl" placeholder="Enter Google Sheet URL..." autocomplete="off">
                    </div>
                </div>

                <div id="modeFile" class="input-mode hidden">
                    <div class="file-drop-area" id="dropArea">
                        <i class="fa-solid fa-file-arrow-up file-icon"
                            style="font-size: 2.5rem; color: var(--accent-cyan);"></i>
                        <p>Drop Excel/CSV here or <span>Browse</span></p>
                        <input type="file" id="fileInput" accept=".csv, .xlsx, .xls" hidden>
                    </div>
                    <div id="filePreview" class="file-preview hidden">
                        <i class="fa-solid fa-file-circle-check"></i>
                        <span id="fileName">data.xlsx</span>
                        <i class="fa-solid fa-trash remove-file" id="removeFile"
                            style="cursor:pointer; margin-left: auto;"></i>
                    </div>
                </div>

                <button id="checkBtn" class="primary-btn" style="margin-top: 1.5rem;">
                    <span>Analyze Responses</span>
                    <i class="fa-solid fa-bolt-lightning"></i>
                </button>
            </main>

            <div id="loading" class="hidden">
                <div class="spinner"></div>
                <p>Analyzing spreadsheet data...</p>
            </div>

            <section id="results" class="results-section hidden">
                <div class="stats-container">
                    <div class="stat-card">
                        <h3>Total Students</h3>
                        <p id="totalCount">0</p>
                    </div>
                    <div class="stat-card responded">
                        <h3>Responded</h3>
                        <p id="respondedCount">0</p>
                    </div>
                    <div class="stat-card not-responded">
                        <h3>Not Responded</h3>
                        <p id="notRespondedCount">0</p>
                    </div>
                </div>

                <div class="results-grid">
                    <!-- Responded List -->
                    <div class="list-card responded-card">
                        <div class="list-header responded-header">
                            <div>
                                <h3>Responded <span class="badge" id="respondedBadge">0</span></h3>
                                <small>All fields filled</small>
                            </div>
                            <button class="copy-btn" id="copyResponded" title="Copy List"><i
                                    class="fa-regular fa-copy"></i></button>
                        </div>
                        <ul id="respondedUl" class="student-list">
                            <!-- Items -->
                        </ul>
                    </div>

                    <!-- Not Responded List -->
                    <div class="list-card not-responded-card">
                        <div class="list-header not-responded-header">
                            <div>
                                <h3>Not Responded <span class="badge" id="notRespondedBadge">0</span></h3>
                                <small>Incomplete / Missing</small>
                            </div>
                            <button class="copy-btn" id="copyNotResponded" title="Copy List"><i
                                    class="fa-regular fa-copy"></i></button>
                        </div>
                        <ul id="notRespondedUl" class="student-list">
                            <!-- Items -->
                        </ul>
                    </div>
                </div>
            </section>
        </section>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>

</html>