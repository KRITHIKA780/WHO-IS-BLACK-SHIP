<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Black Ship | Intelligence Engine</title>

    <!-- Meta Tags -->
    <meta name="description" content="Advanced algorithmic form analysis and tracking system.">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Outfit:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom Style -->
    <link rel="stylesheet" href="/static/style.css">
</head>

<body class="view-{{ view }}">
    <!-- Dynamic Background Engine -->
    <div class="void-canvas">
        <div class="aurora-glow"></div>
        <div class="grid-overlay"></div>
    </div>

    <!-- Main Navigation -->
    {% if current_user.is_authenticated %}
    <nav class="cyber-nav">
        <div class="nav-brand">G.</div>
        <div class="nav-menu">
            <a href="{{ url_for('about') }}" class="nav-link {% if view == 'about' %}active{% endif %}"
                data-tooltip="System Intel">
                <i class="fa-solid fa-microchip"></i>
            </a>
            <a href="{{ url_for('tracker') }}" class="nav-link {% if view == 'tracker' %}active{% endif %}"
                data-tooltip="Hunter">
                <i class="fa-solid fa-satellite-dish"></i>
            </a>
            <div class="nav-divider"></div>
            <a href="{{ url_for('logout') }}" class="nav-link danger" data-tooltip="Disconnect">
                <i class="fa-solid fa-power-off"></i>
            </a>
        </div>
    </nav>
    {% endif %}

    <div class="main-viewport">
        <!-- Hero Header -->
        <header class="cyber-header">
            <h1 class="glitch-text" data-text="BLACK SHIP">BLACK SHIP</h1>
            <div class="status-line">
                <span class="status-dot"></span>
                <p class="status-text">SYSTEM ONLINE // AWAITING INPUT</p>
            </div>
        </header>

        {% if view == 'auth' %}
        <!-- AUTHENTICATION MODULE -->
        <main id="auth-panel" class="cyber-card entrance-anim">
            <div class="card-glow"></div>
            <div class="auth-switcher">
                <button class="switch-btn active" id="btnShowLogin">ACCESS</button>
                <button class="switch-btn" id="btnShowRegister">INITIATE</button>
                <div class="switch-slider"></div>
            </div>

            <div id="login-form-box" class="form-container">
                <div class="cyber-input-group">
                    <input type="text" id="loginUser" required>
                    <label>Operative ID</label>
                    <i class="fa-solid fa-hashtag input-icon"></i>
                    <div class="input-line"></div>
                </div>
                <div class="cyber-input-group">
                    <input type="password" id="loginPass" required>
                    <label>Security Key</label>
                    <i class="fa-solid fa-fingerprint input-icon"></i>
                    <div class="input-line"></div>
                </div>
                <button class="cyber-btn primary" id="loginBtn">
                    <span class="btn-text">ESTABLISH UPLINK</span>
                    <span class="btn-glitch"></span>
                </button>
            </div>

            <div id="register-form-box" class="form-container hidden">
                <div class="cyber-input-group">
                    <input type="text" id="regUser" required>
                    <label>New Designation</label>
                    <i class="fa-solid fa-plus input-icon"></i>
                    <div class="input-line"></div>
                </div>
                <div class="cyber-input-group">
                    <input type="password" id="regPass" required>
                    <label>Set Passphrase</label>
                    <i class="fa-solid fa-key input-icon"></i>
                    <div class="input-line"></div>
                </div>
                <button class="cyber-btn secondary" id="registerBtn">
                    <span class="btn-text">REGISTER IDENTITY</span>
                    <span class="btn-glitch"></span>
                </button>
            </div>

            <div id="authError" class="cyber-toast error hidden">
                <div class="toast-icon"><i class="fa-solid fa-triangle-exclamation"></i></div>
                <span id="authErrorText">Error...</span>
            </div>
        </main>

        {% elif view == 'about' %}
        <!-- INTEL MODULE -->
        <main id="about-panel" class="cyber-card large entrance-anim">
            <div class="card-glow"></div>
            <div class="intel-content">
                <div class="intel-header">
                    <h2>TACTICAL OVERVIEW</h2>
                    <div class="header-decoration"></div>
                </div>

                <p class="intel-brief">
                    The Black Ship protocol utilizes advanced heuristics to cross-reference data streams.
                    It bridges the void between expected attendance and actual signal input.
                </p>

                <div class="specs-grid">
                    <div class="spec-card">
                        <div class="spec-icon"><i class="fa-solid fa-bolt"></i></div>
                        <h3>Hyper-Speed</h3>
                        <p>Instantaneous processing of massive datasets.</p>
                    </div>
                    <div class="spec-card">
                        <div class="spec-icon"><i class="fa-solid fa-eye"></i></div>
                        <h3>Deep Vision</h3>
                        <p>Pattern recognition for fuzzy matching names.</p>
                    </div>
                    <div class="spec-card">
                        <div class="spec-icon"><i class="fa-solid fa-lock"></i></div>
                        <h3>Void Safe</h3>
                        <p>Data remains local. No external leaks.</p>
                    </div>
                </div>

                <a href="{{ url_for('tracker') }}" class="cyber-btn primary center-btn">
                    <span class="btn-text">ENGAGE TRACKER</span>
                </a>
            </div>
        </main>

        {% elif view == 'tracker' %}
        <!-- TRACKER MODULE -->
        <main id="config-panel" class="cyber-card large entrance-anim">
            <div class="card-glow"></div>

            <div id="errorBanner" class="cyber-toast error hidden">
                <div class="toast-icon"><i class="fa-solid fa-bug"></i></div>
                <span id="errorText">System Malfunction</span>
            </div>

            <div class="mode-selector">
                <button class="mode-btn active" id="btnLinkMode">
                    <i class="fa-solid fa-link"></i> NETWORK LINK
                </button>
                <button class="mode-btn" id="btnFileMode">
                    <i class="fa-solid fa-database"></i> LOCAL DATA
                </button>
            </div>

            <!-- Mode: Link -->
            <div id="modeLink" class="input-section">
                <div class="cyber-input-group large">
                    <input type="text" id="sheetUrl" required placeholder=" ">
                    <label>Target URL Endpoint</label>
                    <i class="fa-solid fa-crosshairs input-icon"></i>
                    <div class="input-line"></div>
                </div>
            </div>

            <!-- Mode: File Upload -->
            <div id="modeFile" class="input-section hidden">
                <div class="holo-dropzone" id="dropArea">
                    <div class="drop-content">
                        <i class="fa-solid fa-cloud-arrow-up drop-icon"></i>
                        <h3>UPLOAD FILE</h3>
                        <p>Drag & Drop or Click to Select</p>
                    </div>
                    <input type="file" id="fileInput" class="hidden" accept=".csv, .xlsx, .xls">
                </div>
                <div id="filePreview" class="file-manifest hidden">
                    <div class="manifest-icon"><i class="fa-solid fa-file-code"></i></div>
                    <span id="fileName">data.csv</span>
                    <button class="delete-btn" id="removeFile"><i class="fa-solid fa-xmark"></i></button>
                </div>
            </div>

            <button class="cyber-btn action" id="checkBtn">
                <span class="btn-text">START ANALYSIS</span>
                <div class="loading-spinner hidden" id="btnSpinner"></div>
            </button>

            <div id="loading" class="scan-overlay hidden">
                <div class="scanner-line"></div>
                <div class="scanner-text">ANALYZING DATA...</div>
            </div>
        </main>

        <!-- DASHBOARD RESULTS -->
        <section id="results" class="results-dashboard hidden">
            <!-- HUD Stats -->
            <div class="hud-grid">
                <div class="hud-panel total">
                    <div class="hud-label">TOTAL STUDENTS</div>
                    <div class="hud-value" id="totalCount">0</div>
                    <div class="hud-bar"></div>
                </div>
                <div class="hud-panel verified">
                    <div class="hud-label">RESPONDED</div>
                    <div class="hud-value" id="respondedCount">0</div>
                    <div class="hud-bar"></div>
                </div>
                <div class="hud-panel missing">
                    <div class="hud-label">NOT RESPONDED</div>
                    <div class="hud-value" id="notRespondedCount">0</div>
                    <div class="hud-bar"></div>
                </div>
            </div>

            <!-- Data Feeds -->
            <div class="feed-container">
                <!-- Verified Feed -->
                <div class="data-feed verified-feed">
                    <div class="feed-header">
                        <h3><i class="fa-solid fa-circle-check"></i> RESPONDED LIST</h3>
                        <span class="feed-badge" id="respondedBadge">0</span>
                    </div>
                    <ul id="respondedUl" class="feed-list"></ul>
                    <button class="feed-action" id="copyResponded">
                        <i class="fa-solid fa-file-excel"></i> DOWNLOAD EXCEL
                    </button>
                </div>

                <!-- Missing Feed -->
                <div class="data-feed missing-feed">
                    <div class="feed-header">
                        <h3><i class="fa-solid fa-circle-xmark"></i> MISSING LIST</h3>
                        <span class="feed-badge" id="notRespondedBadge">0</span>
                    </div>
                    <ul id="notRespondedUl" class="feed-list"></ul>
                    <button class="feed-action" id="copyNotResponded">
                        <i class="fa-solid fa-file-excel"></i> DOWNLOAD EXCEL
                    </button>
                </div>
            </div>
        </section>
        {% endif %}
    </div>

    <script src="/static/script.js"></script>
</body>

</html>